<!DOCTYPE html><html lang="en" data-astro-cid-37fxchfa> <head><meta charset="UTF-8"><meta name="description" content="Amp Examples and Guides"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="icon" type="image/svg+xml" href="/favicon.svg"><title>undefined - Examples</title><style>[data-astro-cid-37fxchfa]{margin:0;padding:0;box-sizing:border-box}body{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,sans-serif;line-height:1.6;color:#333;background-color:#fff}nav[data-astro-cid-37fxchfa]{background:#f8f9fa;border-bottom:1px solid #e9ecef;padding:1rem 0}.nav-container[data-astro-cid-37fxchfa]{max-width:1200px;margin:0 auto;padding:0 2rem;display:flex;justify-content:space-between;align-items:center}.logo[data-astro-cid-37fxchfa]{font-weight:600;font-size:1.2rem;color:#06c;text-decoration:none}.nav-links[data-astro-cid-37fxchfa]{display:flex;gap:2rem}.nav-links[data-astro-cid-37fxchfa] a[data-astro-cid-37fxchfa]{color:#333;text-decoration:none;font-weight:500}.nav-links[data-astro-cid-37fxchfa] a[data-astro-cid-37fxchfa]:hover{color:#06c}main[data-astro-cid-37fxchfa]{max-width:1200px;margin:0 auto;padding:2rem;min-height:calc(100vh - 160px)}footer[data-astro-cid-37fxchfa]{background:#f8f9fa;border-top:1px solid #e9ecef;padding:2rem 0;text-align:center;color:#666}footer[data-astro-cid-37fxchfa] a[data-astro-cid-37fxchfa]{color:#06c}
.example-header[data-astro-cid-snxq2g6g]{margin-bottom:2rem;padding-bottom:2rem;border-bottom:1px solid #e9ecef}.breadcrumb[data-astro-cid-snxq2g6g]{color:#666;font-size:.9rem;margin-bottom:1rem}.breadcrumb[data-astro-cid-snxq2g6g] a[data-astro-cid-snxq2g6g]{color:#06c;text-decoration:none}.breadcrumb[data-astro-cid-snxq2g6g] a[data-astro-cid-snxq2g6g]:hover{text-decoration:underline}.example-header[data-astro-cid-snxq2g6g] h1[data-astro-cid-snxq2g6g]{color:#333;font-size:2rem;margin-bottom:1rem}.description[data-astro-cid-snxq2g6g]{color:#666;font-size:1.1rem;line-height:1.6;margin-bottom:1.5rem}.metadata[data-astro-cid-snxq2g6g]{display:flex;gap:1rem;flex-wrap:wrap;align-items:center}.thread-link[data-astro-cid-snxq2g6g]{background:#06c;color:#fff;padding:.5rem 1rem;border-radius:4px;text-decoration:none;font-size:.875rem;font-weight:500;transition:background-color .2s ease}.thread-link[data-astro-cid-snxq2g6g]:hover{background:#0052a3}.tags[data-astro-cid-snxq2g6g]{display:flex;gap:.5rem;flex-wrap:wrap}.tag[data-astro-cid-snxq2g6g]{background:#f5f5f5;color:#666;padding:.25rem .5rem;border-radius:3px;font-size:.75rem}.example-content[data-astro-cid-snxq2g6g]{max-width:none;line-height:1.7}.example-content[data-astro-cid-snxq2g6g] h2{color:#333;font-size:1.5rem;margin:2rem 0 1rem;padding-bottom:.5rem;border-bottom:1px solid #e9ecef}.example-content[data-astro-cid-snxq2g6g] h3{color:#333;font-size:1.25rem;margin:1.5rem 0 .75rem}.example-content[data-astro-cid-snxq2g6g] p{margin-bottom:1rem;color:#444}.example-content[data-astro-cid-snxq2g6g] code{background:#f8f9fa;padding:.125rem .25rem;border-radius:3px;font-size:.875rem}.example-content[data-astro-cid-snxq2g6g] pre{background:#f8f9fa;border:1px solid #e9ecef;border-radius:4px;padding:1rem;overflow-x:auto;margin:1rem 0}.example-content[data-astro-cid-snxq2g6g] ul,.example-content[data-astro-cid-snxq2g6g] ol{padding-left:2rem;margin-bottom:1rem}.example-content[data-astro-cid-snxq2g6g] li{margin-bottom:.5rem}.example-content[data-astro-cid-snxq2g6g] blockquote{border-left:4px solid #0066cc;margin:1rem 0;padding:.5rem 1rem;background:#f8f9fa;color:#666}.example-content[data-astro-cid-snxq2g6g] table{width:100%;border-collapse:collapse;margin:1rem 0}.example-content[data-astro-cid-snxq2g6g] th,.example-content[data-astro-cid-snxq2g6g] td{border:1px solid #e9ecef;padding:.75rem;text-align:left}.example-content[data-astro-cid-snxq2g6g] th{background:#f8f9fa;font-weight:600}
</style></head> <body data-astro-cid-37fxchfa> <nav data-astro-cid-37fxchfa> <div class="nav-container" data-astro-cid-37fxchfa> <a href="/" class="logo" data-astro-cid-37fxchfa>Amp Examples & Guides</a> <div class="nav-links" data-astro-cid-37fxchfa> <a href="/guides" data-astro-cid-37fxchfa>Guides</a> <a href="/examples" data-astro-cid-37fxchfa>Examples</a> </div> </div> </nav> <main data-astro-cid-37fxchfa>  <div class="example-header" data-astro-cid-snxq2g6g> <nav class="breadcrumb" data-astro-cid-snxq2g6g> <a href="/" data-astro-cid-snxq2g6g>Home</a> / <a href="/examples" data-astro-cid-snxq2g6g>Examples</a> /  </nav> <h1 data-astro-cid-snxq2g6g></h1> <p class="description" data-astro-cid-snxq2g6g></p> <div class="metadata" data-astro-cid-snxq2g6g>   </div> </div> <div class="example-content" data-astro-cid-snxq2g6g> <h1 id="sequential-sonarqube-issue-processor">Sequential SonarQube Issue Processor</h1>
<h2 id="simple-beginner-friendly-approach-for-processing-sonarqube-issues-one-at-a-time">Simple, beginner-friendly approach for processing SonarQube issues one at a time</h2>
<p>This implementation uses a two-step prompt-based approach to process SonarQube issues sequentially, making it ideal for learning the automation workflow or handling smaller batches of issues with full control and visibility.</p>
<h2 id="overview">Overview</h2>
<p>This sequential approach breaks the automation into two clear steps:</p>
<ol>
<li><strong>Step 1: Analysis &#x26; Planning</strong> - Fetch issues from SonarQube and create execution plans</li>
<li><strong>Step 2: Sequential Execution</strong> - Process each issue according to the plan, one at a time</li>
</ol>
<h2 id="when-to-use-this-approach">When to Use This Approach</h2>
<p><strong>Perfect for:</strong></p>
<ul>
<li>Learning SonarQube automation workflows</li>
<li>Processing fewer than 10 issues</li>
<li>Systems with limited resources</li>
<li>Situations requiring careful review before execution</li>
<li>Users who want full visibility into each step</li>
<li>Manual oversight and control over the process</li>
</ul>
<p><strong>Advantages:</strong></p>
<ul>
<li>Simple to understand and debug</li>
<li>Full visibility into planning before execution</li>
<li>Manual review points between steps</li>
<li>Easy error recovery and intervention</li>
<li>Clear progress tracking</li>
<li>No complex git worktree management</li>
</ul>
<h2 id="prerequisites">Prerequisites</h2>
<ul>
<li><strong>Amp CLI</strong>: <code>npm install -g @sourcegraph/amp</code></li>
<li><strong>GitHub CLI</strong>: <code>gh auth login</code></li>
<li><strong>Git</strong>: Standard git installation with configured user</li>
<li><strong>SonarQube MCP</strong>: Configured in your Amp settings for fetching issues</li>
</ul>
<h2 id="step-1-issue-analysis--planning">Step 1: Issue Analysis &#x26; Planning</h2>
<h3 id="step-1-overview">Step 1 Overview</h3>
<p>The first step fetches SonarQube issues and creates detailed execution plans for each issue, including analysis of the code problems and step-by-step fix instructions.</p>
<h3 id="how-to-execute">How to Execute</h3>
<p>Execute this from the <strong>parent directory</strong> where your repositories already exist:</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="bash"><code><span class="line"><span style="color:#6A737D"># Navigate to your workspace directory (where repos are located) </span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">#copy the step_1_sonarqube-analysis-prompt-template.md file [from the sequential-simple folder] to the parent directory</span></span>
<span class="line"><span style="color:#79B8FF">cd</span><span style="color:#9ECBFF"> /path/to/parent-dir-above-your-target-repo</span><span style="color:#E1E4E8"> </span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D"># launch Amp</span></span>
<span class="line"><span style="color:#B392F0">amp</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D"># use this prompt referencing the template and fill in your variables </span></span>
<span class="line"><span style="color:#B392F0">using</span><span style="color:#9ECBFF"> @sonarqube-issue-processor-prompt-template.md</span><span style="color:#9ECBFF"> generate</span><span style="color:#9ECBFF"> a</span><span style="color:#9ECBFF"> plan</span><span style="color:#9ECBFF"> to</span><span style="color:#9ECBFF"> fix</span><span style="color:#9ECBFF"> the</span><span style="color:#9ECBFF"> issues</span></span>
<span class="line"><span style="color:#B392F0">┃</span></span>
<span class="line"><span style="color:#B392F0">┃</span><span style="color:#9ECBFF"> REPO_LOCATION</span><span style="color:#9ECBFF"> =</span><span style="color:#9ECBFF"> ./demo-latest-audiobooks</span></span>
<span class="line"><span style="color:#B392F0">┃</span><span style="color:#9ECBFF"> BASE_BRANCH</span><span style="color:#9ECBFF"> =</span><span style="color:#9ECBFF"> main</span></span>
<span class="line"><span style="color:#B392F0">┃</span><span style="color:#9ECBFF"> SONARQUBE_PROJECT_KEY</span><span style="color:#9ECBFF"> =</span><span style="color:#9ECBFF"> Isuru-F_demo-latest-audiobooks</span></span></code></pre>
<p>Example thread <a href="https://ampcode.com/threads/T-b199e3db-3261-4e4d-bb7c-db7951799366?q=sonarqube">https://ampcode.com/threads/T-b199e3db-3261-4e4d-bb7c-db7951799366?q=sonarqube</a></p>
<p><strong>Template Reference</strong>: <a href="./step_1_sonarqube-analysis-prompt-template.md"><code>step_1_sonarqube-analysis-prompt-template.md</code></a></p>
<p><strong>Example Thread</strong>: <a href="LINK_TO_STEP_1_THREAD">View Step 1 Analysis Example →</a></p>
<h3 id="output-files">Output Files</h3>
<p>After Step 1 completes, you’ll have:</p>
<ul>
<li>Individual analysis files for each SonarQube issue</li>
<li>Detailed execution plans with specific steps</li>
<li>Repository and file location information</li>
<li>Priority and complexity assessments</li>
</ul>
<h2 id="step-2-fix-implementation--execution">Step 2: Fix Implementation &#x26; Execution</h2>
<h3 id="step-2-overview">Step 2 Overview</h3>
<p>The second step takes the plans created in Step 1 and sequentially executes them, processing one issue at a time with full testing and PR creation.</p>
<h3 id="step-2-execution">Step 2 Execution</h3>
<p>Execute this from the same directory after Step 1 completes:</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="bash"><code><span class="line"><span style="color:#6A737D"># Run Step 2 sequential execution</span></span>
<span class="line"><span style="color:#B392F0">amp</span><span style="color:#79B8FF"> -x</span><span style="color:#9ECBFF"> "Use the SonarQube fix implementation template to sequentially process all planned issues. Follow the step_2_sonarqube-fix-implementation-prompt-template.md template."</span></span></code></pre>
<h3 id="example-execution">Example Execution</h3>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="bash"><code><span class="line"><span style="color:#6A737D"># Execute the planned fixes</span></span>
<span class="line"><span style="color:#B392F0">amp</span><span style="color:#79B8FF"> -x</span><span style="color:#9ECBFF"> "Use the SonarQube fix implementation template to sequentially process all planned issues from Step 1. Follow the step_2_sonarqube-fix-implementation-prompt-template.md template and process issues one by one."</span></span></code></pre>
<p><strong>Template Reference</strong>: <a href="./step_2_sonarqube-fix-implementation-prompt-template.md"><code>step_2_sonarqube-fix-implementation-prompt-template.md</code></a></p>
<p><strong>Example Thread</strong>: <a href="LINK_TO_STEP_2_THREAD">View Step 2 Execution Example →</a></p>
<h3 id="what-happens-during-execution">What Happens During Execution</h3>
<p>For each issue, Step 2 will:</p>
<ol>
<li>Navigate to the correct repository</li>
<li>Create a new branch for the fix</li>
<li>Implement the planned solution</li>
<li>Build and test the code</li>
<li>Commit changes with descriptive messages</li>
<li>Create a pull request via GitHub CLI</li>
<li>Update progress tracking</li>
<li>Move to the next issue</li>
</ol>
<h2 id="complete-workflow-example">Complete Workflow Example</h2>
<p>Here’s a complete example of using both steps:</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="bash"><code><span class="line"><span style="color:#6A737D"># 1. Navigate to your workspace (where repos exist)</span></span>
<span class="line"><span style="color:#79B8FF">cd</span><span style="color:#9ECBFF"> ~/my-workspace</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D"># 2. Run Step 1: Analysis &#x26; Planning</span></span>
<span class="line"><span style="color:#B392F0">amp</span><span style="color:#79B8FF"> -x</span><span style="color:#9ECBFF"> "Use the SonarQube issue analysis template to fetch issues from organization 'my-sonarqube-org' and create execution plans. Follow the step_1_sonarqube-analysis-prompt-template.md template."</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D"># 3. Review the generated plans (optional but recommended)</span></span>
<span class="line"><span style="color:#B392F0">ls</span><span style="color:#79B8FF"> -la</span><span style="color:#9ECBFF"> sonar-issue-</span><span style="color:#79B8FF">*</span><span style="color:#9ECBFF">.md</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D"># 4. Run Step 2: Sequential Execution  </span></span>
<span class="line"><span style="color:#B392F0">amp</span><span style="color:#79B8FF"> -x</span><span style="color:#9ECBFF"> "Use the SonarQube fix implementation template to sequentially process all planned issues from Step 1. Follow the step_2_sonarqube-fix-implementation-prompt-template.md template."</span></span></code></pre>
<h2 id="file-structure-after-execution">File Structure After Execution</h2>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="text"><code><span class="line"><span>your-workspace/</span></span>
<span class="line"><span>├── repo-1/                     # Your existing repositories</span></span>
<span class="line"><span>├── amp-sonarqube-processor</span></span>
<span class="line"><span>    ├── repo-1</span></span>
<span class="line"><span>        ├── NOT_STARTED-sonar-issue-ABC123.md       # Generated analysis files</span></span>
<span class="line"><span>        ├── NOT_STARTED-sonar-issue-DEF456.md</span></span>
<span class="line"><span>        ├── COMPLETED-sonar-execution-log.md      # Overall progress tracking</span></span></code></pre>
<h2 id="monitoring-progress">Monitoring Progress</h2>
<p>Both steps provide detailed logging and progress tracking:</p>
<ul>
<li><strong>Step 1</strong>: Creates analysis files you can review before execution</li>
<li><strong>Step 2</strong>: Updates progress in real-time, moves completed issues to <code>sonar-completed/</code></li>
<li><strong>Error Handling</strong>: Clear error messages with recovery instructions</li>
<li><strong>PR Links</strong>: All created PRs are tracked in <code>sonar-completed/pr-links.md</code></li>
</ul>
<h2 id="error-recovery">Error Recovery</h2>
<p>If Step 2 encounters issues:</p>
<ol>
<li><strong>Review the logs</strong> in the generated files</li>
<li><strong>Fix any blocking issues</strong> manually if needed</li>
<li><strong>Re-run Step 2</strong> - it will skip already completed issues</li>
<li><strong>Continue from where it left off</strong></li>
</ol>
<h2 id="advantages-over-parallel-approach">Advantages Over Parallel Approach</h2>
<ul>
<li><strong>Manual Review Points</strong>: Inspect plans before execution</li>
<li><strong>Easy local Debugging</strong>: Debug locally if needed, using your preferred tools that you already use</li>
<li><strong>Intervention Possible</strong>: Stop and resume at any point</li>
<li><strong>Learning Friendly</strong>: See exactly what happens at each step</li>
<li><strong>Resource Efficient</strong>: No concurrent processing overhead</li>
<li><strong>Controlled Execution</strong>: Full visibility and control over each step</li>
</ul>
<h2 id="getting-help">Getting Help</h2>
<ol>
<li><strong>Review Template Files</strong>: Check the referenced template files for detailed instructions</li>
<li><strong>Check Example Threads</strong>: Follow the linked example executions</li>
<li><strong>Monitor Output Files</strong>: Review generated analysis and log files</li>
<li><strong>Start Small</strong>: Try with a single repository first</li>
</ol>
<h2 id="next-steps">Next Steps</h2>
<ol>
<li>Ensure your repositories are already cloned in your workspace</li>
<li>Configure SonarQube MCP in your Amp settings</li>
<li>Run Step 1 to analyze and plan</li>
<li>Review the generated plans</li>
<li>Run Step 2 to execute sequentially</li>
</ol> </div>  </main> <footer data-astro-cid-37fxchfa> <p data-astro-cid-37fxchfa>© 2024 Sourcegraph. Supplemental to the <a href="https://ampcode.com/manual" data-astro-cid-37fxchfa>Amp Manual</a>.</p> </footer> </body></html> 