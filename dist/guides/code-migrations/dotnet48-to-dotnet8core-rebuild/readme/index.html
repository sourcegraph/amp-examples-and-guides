<!DOCTYPE html><html lang="en" data-astro-cid-37fxchfa> <head><meta charset="UTF-8"><meta name="description" content="Amp Examples and Guides"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="icon" type="image/svg+xml" href="/favicon.svg"><title>undefined - Guides</title><style>[data-astro-cid-37fxchfa]{margin:0;padding:0;box-sizing:border-box}body{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,sans-serif;line-height:1.6;color:#333;background-color:#fff}nav[data-astro-cid-37fxchfa]{background:#f8f9fa;border-bottom:1px solid #e9ecef;padding:1rem 0}.nav-container[data-astro-cid-37fxchfa]{max-width:1200px;margin:0 auto;padding:0 2rem;display:flex;justify-content:space-between;align-items:center}.logo[data-astro-cid-37fxchfa]{font-weight:600;font-size:1.2rem;color:#06c;text-decoration:none}.nav-links[data-astro-cid-37fxchfa]{display:flex;gap:2rem}.nav-links[data-astro-cid-37fxchfa] a[data-astro-cid-37fxchfa]{color:#333;text-decoration:none;font-weight:500}.nav-links[data-astro-cid-37fxchfa] a[data-astro-cid-37fxchfa]:hover{color:#06c}main[data-astro-cid-37fxchfa]{max-width:1200px;margin:0 auto;padding:2rem;min-height:calc(100vh - 160px)}footer[data-astro-cid-37fxchfa]{background:#f8f9fa;border-top:1px solid #e9ecef;padding:2rem 0;text-align:center;color:#666}footer[data-astro-cid-37fxchfa] a[data-astro-cid-37fxchfa]{color:#06c}
.guide-header[data-astro-cid-oolc5s6i]{margin-bottom:2rem;padding-bottom:2rem;border-bottom:1px solid #e9ecef}.breadcrumb[data-astro-cid-oolc5s6i]{color:#666;font-size:.9rem;margin-bottom:1rem}.breadcrumb[data-astro-cid-oolc5s6i] a[data-astro-cid-oolc5s6i]{color:#06c;text-decoration:none}.breadcrumb[data-astro-cid-oolc5s6i] a[data-astro-cid-oolc5s6i]:hover{text-decoration:underline}.guide-header[data-astro-cid-oolc5s6i] h1[data-astro-cid-oolc5s6i]{color:#333;font-size:2rem;margin-bottom:1rem}.description[data-astro-cid-oolc5s6i]{color:#666;font-size:1.1rem;line-height:1.6;margin-bottom:1.5rem}.metadata[data-astro-cid-oolc5s6i]{display:flex;gap:1rem;flex-wrap:wrap}.phase-badge[data-astro-cid-oolc5s6i]{display:inline-block;padding:.25rem .5rem;border-radius:3px;font-size:.75rem;font-weight:600;text-transform:uppercase;letter-spacing:.05em}.phase-plan[data-astro-cid-oolc5s6i]{background:#e3f2fd;color:#1565c0}.phase-build[data-astro-cid-oolc5s6i]{background:#f3e5f5;color:#7b1fa2}.phase-deploy[data-astro-cid-oolc5s6i]{background:#e8f5e8;color:#2e7d32}.phase-support[data-astro-cid-oolc5s6i]{background:#fff3e0;color:#f57c00}.category-badge[data-astro-cid-oolc5s6i]{background:#f5f5f5;color:#666;padding:.25rem .5rem;border-radius:3px;font-size:.75rem}.guide-content[data-astro-cid-oolc5s6i]{max-width:none;line-height:1.7}.guide-content[data-astro-cid-oolc5s6i] h2{color:#333;font-size:1.5rem;margin:2rem 0 1rem;padding-bottom:.5rem;border-bottom:1px solid #e9ecef}.guide-content[data-astro-cid-oolc5s6i] h3{color:#333;font-size:1.25rem;margin:1.5rem 0 .75rem}.guide-content[data-astro-cid-oolc5s6i] p{margin-bottom:1rem;color:#444}.guide-content[data-astro-cid-oolc5s6i] code{background:#f8f9fa;padding:.125rem .25rem;border-radius:3px;font-size:.875rem}.guide-content[data-astro-cid-oolc5s6i] pre{background:#f8f9fa;border:1px solid #e9ecef;border-radius:4px;padding:1rem;overflow-x:auto;margin:1rem 0}.guide-content[data-astro-cid-oolc5s6i] ul,.guide-content[data-astro-cid-oolc5s6i] ol{padding-left:2rem;margin-bottom:1rem}.guide-content[data-astro-cid-oolc5s6i] li{margin-bottom:.5rem}.guide-content[data-astro-cid-oolc5s6i] blockquote{border-left:4px solid #0066cc;margin:1rem 0;padding:.5rem 1rem;background:#f8f9fa;color:#666}.guide-content[data-astro-cid-oolc5s6i] table{width:100%;border-collapse:collapse;margin:1rem 0}.guide-content[data-astro-cid-oolc5s6i] th,.guide-content[data-astro-cid-oolc5s6i] td{border:1px solid #e9ecef;padding:.75rem;text-align:left}.guide-content[data-astro-cid-oolc5s6i] th{background:#f8f9fa;font-weight:600}
</style></head> <body data-astro-cid-37fxchfa> <nav data-astro-cid-37fxchfa> <div class="nav-container" data-astro-cid-37fxchfa> <a href="/" class="logo" data-astro-cid-37fxchfa>Amp Examples & Guides</a> <div class="nav-links" data-astro-cid-37fxchfa> <a href="/guides" data-astro-cid-37fxchfa>Guides</a> <a href="/examples" data-astro-cid-37fxchfa>Examples</a> </div> </div> </nav> <main data-astro-cid-37fxchfa>  <div class="guide-header" data-astro-cid-oolc5s6i> <nav class="breadcrumb" data-astro-cid-oolc5s6i> <a href="/" data-astro-cid-oolc5s6i>Home</a> / <a href="/guides" data-astro-cid-oolc5s6i>Guides</a> /  </nav> <h1 data-astro-cid-oolc5s6i></h1> <p class="description" data-astro-cid-oolc5s6i></p> <div class="metadata" data-astro-cid-oolc5s6i>   </div> </div> <div class="guide-content" data-astro-cid-oolc5s6i> <h1 id="net-48-to-core-8-migration-guide">.NET 4.8 to Core 8 Migration Guide</h1>
<h2 id="example-repo-and-migration-output">Example Repo and migration output</h2>
<ul>
<li>
<p>Source repo <a href="https://github.com/Isuru-F/dot-net-4-8-migration-example">https://github.com/Isuru-F/dot-net-4-8-migration-example</a></p>
</li>
<li>
<p>Migration PR <a href="https://github.com/Isuru-F/dot-net-4-8-migration-example/pull/1">https://github.com/Isuru-F/dot-net-4-8-migration-example/pull/1</a></p>
</li>
<li>
<p>Post migration Method inventory analysis <a href="https://github.com/Isuru-F/dot-net-4-8-migration-example/pull/1#issuecomment-3166767509">https://github.com/Isuru-F/dot-net-4-8-migration-example/pull/1#issuecomment-3166767509</a></p>
</li>
</ul>
<h2 id="preparation-phase">Preparation Phase</h2>
<h3 id="source-project-requirements">Source Project Requirements</h3>
<ul>
<li>Install OpenCover: <code>choco install opencover.portable -y</code></li>
<li>Verify build: <code>dotnet build</code> or via <code>msbuild</code></li>
<li>Set up <code>tree-sitter/c-sharp</code></li>
<li>CLI tools (optional) or VS Code</li>
<li>Are you able to verify the migration? Do you need to build a test harness/client CLI project first?</li>
</ul>
<h3 id="generate-agentmd">Generate Agent.md</h3>
<ul>
<li>Document build/run/test procedures</li>
<li>Always include “build and test” in Amp prompts</li>
</ul>
<h2 id="assessment-phase">Assessment Phase</h2>
<h3 id="safety-check">Safety Check</h3>
<ul>
<li>Assess current test coverage <a href="https://ampcode.com/threads/T-4789e69b-5fcd-4a1a-8b3b-007286d713d5">Example prompt -> Get test coverage report</a></li>
<li>Identify all business logic requirements and extract into <code>source-methods-vs-business-logic.md</code>
Note: We will do this after the migration and generate a <code>target-methods-vs-business-logic.md</code> file and compare.</li>
</ul>
<h3 id="test-coverage-enhancement">Test Coverage Enhancement</h3>
<ol>
<li>Build and test current state</li>
<li>Add unit tests for key components -> <a href="https://ampcode.com/threads/T-89dfffa2-fae6-4c6d-bbd5-a4574fa91605">Example prompt to backfill unit tests</a></li>
<li>Re-run build and test</li>
<li>Generate updated coverage report</li>
</ol>
<p><strong>Output:</strong> Comprehensive test suite</p>
<h2 id="analysis-phase">Analysis Phase</h2>
<h3 id="method-inventory">Method Inventory</h3>
<p>Use Tree-sitter C# to generate method report and ask the oracle for business logic classification and summary.</p>
<p><a href="https://ampcode.com/threads/T-fc218532-98d6-467c-9fc9-9e52c17a119a?q=dotnet">Example prompt</a></p>
<p>Create table with:</p>
<ul>
<li>Filename</li>
<li>Method name</li>
<li>Classification (noise vs business logic)</li>
<li>Business logic description with enough detail extracted to verify after migration</li>
</ul>
<p>Optional: Add unit tests for business rules</p>
<h2 id="unit-test-coverage">Unit test coverage</h2>
<ul>
<li>Generate unit test coverage report and review risk</li>
<li>Add additional unit tests if required</li>
</ul>
<h2 id="planning-phase">Planning Phase</h2>
<h3 id="multi-step-migration-plan">Multi-Step Migration Plan</h3>
<p>Ask Amp to generate a plan for you. Instructions should include;</p>
<ol>
<li>Analyise this project and create phase-by-phase breakdown - file per phase</li>
<li>Oracle review of plan</li>
<li>Build/test verification between phases</li>
<li>Maintain unit test coverage</li>
<li>API Inputs and Outputs/ contracts should remain the same. There should be no impact to clients that consume this prjects API.</li>
<li>Store plan to disk</li>
<li>Create progress tracking file</li>
<li>Document any blockers in progress file</li>
</ol>
<p><a href="https://ampcode.com/threads/T-fc218532-98d6-467c-9fc9-9e52c17a119a?q=dotnet">Example prompt</a></p>
<h2 id="execution-phase">Execution Phase</h2>
<h3 id="phase-by-phase-migration">Phase-by-Phase Migration</h3>
<ul>
<li>Ask Amp to create a new branch and Execute each phase, ask amp to sue subagents to maintain main thread context</li>
<li>Ask amp to Build, compile, and run tests before starting next phase</li>
<li>Document blockers in progress file with detailed reasoning</li>
<li>If things do not go to plan, revise the original plan and start again.</li>
<li>Commit per phase to have waypoints you can come back to.</li>
</ul>
<p><a href="https://ampcode.com/threads/T-7d545c2e-35cd-4678-b7f5-964e5cc2f6d7?q=dotnet">Example prompt</a></p>
<h2 id="verification-phase">Verification Phase</h2>
<h3 id="final-validation">Final Validation</h3>
<ul>
<li>Run Tree-sitter comparison (migrated vs main branch)</li>
<li>Identify missing or extra methods</li>
<li>Flag any untested work as risk</li>
<li>Build / test / run migrated code</li>
</ul>
<h2 id="success-criteria">Success Criteria</h2>
<ul>
<li>Maintained test coverage</li>
<li>All business logic preserved</li>
<li>Build/test passes at each phase</li>
<li>Complete method inventory matches</li>
</ul>
<h2 id="next-steps">Next steps</h2>
<ul>
<li>Update CI scripts / github workflow actions with new framework build/ test steps</li>
</ul> </div>  </main> <footer data-astro-cid-37fxchfa> <p data-astro-cid-37fxchfa>© 2024 Sourcegraph. Supplemental to the <a href="https://ampcode.com/manual" data-astro-cid-37fxchfa>Amp Manual</a>.</p> </footer> </body></html> 