<!DOCTYPE html><html lang="en" data-astro-cid-37fxchfa> <head><meta charset="UTF-8"><meta name="description" content="Amp Examples and Guides"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="icon" type="image/svg+xml" href="/favicon.svg"><title>undefined - Guides</title><style>[data-astro-cid-37fxchfa]{margin:0;padding:0;box-sizing:border-box}body{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,sans-serif;line-height:1.6;color:#333;background-color:#fff}nav[data-astro-cid-37fxchfa]{background:#f8f9fa;border-bottom:1px solid #e9ecef;padding:1rem 0}.nav-container[data-astro-cid-37fxchfa]{max-width:1200px;margin:0 auto;padding:0 2rem;display:flex;justify-content:space-between;align-items:center}.logo[data-astro-cid-37fxchfa]{font-weight:600;font-size:1.2rem;color:#06c;text-decoration:none}.nav-links[data-astro-cid-37fxchfa]{display:flex;gap:2rem}.nav-links[data-astro-cid-37fxchfa] a[data-astro-cid-37fxchfa]{color:#333;text-decoration:none;font-weight:500}.nav-links[data-astro-cid-37fxchfa] a[data-astro-cid-37fxchfa]:hover{color:#06c}main[data-astro-cid-37fxchfa]{max-width:1200px;margin:0 auto;padding:2rem;min-height:calc(100vh - 160px)}footer[data-astro-cid-37fxchfa]{background:#f8f9fa;border-top:1px solid #e9ecef;padding:2rem 0;text-align:center;color:#666}footer[data-astro-cid-37fxchfa] a[data-astro-cid-37fxchfa]{color:#06c}
.guide-header[data-astro-cid-oolc5s6i]{margin-bottom:2rem;padding-bottom:2rem;border-bottom:1px solid #e9ecef}.breadcrumb[data-astro-cid-oolc5s6i]{color:#666;font-size:.9rem;margin-bottom:1rem}.breadcrumb[data-astro-cid-oolc5s6i] a[data-astro-cid-oolc5s6i]{color:#06c;text-decoration:none}.breadcrumb[data-astro-cid-oolc5s6i] a[data-astro-cid-oolc5s6i]:hover{text-decoration:underline}.guide-header[data-astro-cid-oolc5s6i] h1[data-astro-cid-oolc5s6i]{color:#333;font-size:2rem;margin-bottom:1rem}.description[data-astro-cid-oolc5s6i]{color:#666;font-size:1.1rem;line-height:1.6;margin-bottom:1.5rem}.metadata[data-astro-cid-oolc5s6i]{display:flex;gap:1rem;flex-wrap:wrap}.phase-badge[data-astro-cid-oolc5s6i]{display:inline-block;padding:.25rem .5rem;border-radius:3px;font-size:.75rem;font-weight:600;text-transform:uppercase;letter-spacing:.05em}.phase-plan[data-astro-cid-oolc5s6i]{background:#e3f2fd;color:#1565c0}.phase-build[data-astro-cid-oolc5s6i]{background:#f3e5f5;color:#7b1fa2}.phase-deploy[data-astro-cid-oolc5s6i]{background:#e8f5e8;color:#2e7d32}.phase-support[data-astro-cid-oolc5s6i]{background:#fff3e0;color:#f57c00}.category-badge[data-astro-cid-oolc5s6i]{background:#f5f5f5;color:#666;padding:.25rem .5rem;border-radius:3px;font-size:.75rem}.guide-content[data-astro-cid-oolc5s6i]{max-width:none;line-height:1.7}.guide-content[data-astro-cid-oolc5s6i] h2{color:#333;font-size:1.5rem;margin:2rem 0 1rem;padding-bottom:.5rem;border-bottom:1px solid #e9ecef}.guide-content[data-astro-cid-oolc5s6i] h3{color:#333;font-size:1.25rem;margin:1.5rem 0 .75rem}.guide-content[data-astro-cid-oolc5s6i] p{margin-bottom:1rem;color:#444}.guide-content[data-astro-cid-oolc5s6i] code{background:#f8f9fa;padding:.125rem .25rem;border-radius:3px;font-size:.875rem}.guide-content[data-astro-cid-oolc5s6i] pre{background:#f8f9fa;border:1px solid #e9ecef;border-radius:4px;padding:1rem;overflow-x:auto;margin:1rem 0}.guide-content[data-astro-cid-oolc5s6i] ul,.guide-content[data-astro-cid-oolc5s6i] ol{padding-left:2rem;margin-bottom:1rem}.guide-content[data-astro-cid-oolc5s6i] li{margin-bottom:.5rem}.guide-content[data-astro-cid-oolc5s6i] blockquote{border-left:4px solid #0066cc;margin:1rem 0;padding:.5rem 1rem;background:#f8f9fa;color:#666}.guide-content[data-astro-cid-oolc5s6i] table{width:100%;border-collapse:collapse;margin:1rem 0}.guide-content[data-astro-cid-oolc5s6i] th,.guide-content[data-astro-cid-oolc5s6i] td{border:1px solid #e9ecef;padding:.75rem;text-align:left}.guide-content[data-astro-cid-oolc5s6i] th{background:#f8f9fa;font-weight:600}
</style></head> <body data-astro-cid-37fxchfa> <nav data-astro-cid-37fxchfa> <div class="nav-container" data-astro-cid-37fxchfa> <a href="/" class="logo" data-astro-cid-37fxchfa>Amp Examples & Guides</a> <div class="nav-links" data-astro-cid-37fxchfa> <a href="/guides" data-astro-cid-37fxchfa>Guides</a> <a href="/examples" data-astro-cid-37fxchfa>Examples</a> </div> </div> </nav> <main data-astro-cid-37fxchfa>  <div class="guide-header" data-astro-cid-oolc5s6i> <nav class="breadcrumb" data-astro-cid-oolc5s6i> <a href="/" data-astro-cid-oolc5s6i>Home</a> / <a href="/guides" data-astro-cid-oolc5s6i>Guides</a> /  </nav> <h1 data-astro-cid-oolc5s6i></h1> <p class="description" data-astro-cid-oolc5s6i></p> <div class="metadata" data-astro-cid-oolc5s6i>   </div> </div> <div class="guide-content" data-astro-cid-oolc5s6i> <h1 id="pet-store-api">Pet Store API</h1>
<p>A Spring Boot application implementing the OpenAPI Pet Store specification. This
project demonstrates a RESTful API for managing pets, categories, and tags with
automatic OpenAPI client generation.</p>
<h2 id="prerequisites">Prerequisites</h2>
<ul>
<li><strong>Java 21</strong> (required)</li>
<li><strong>Git</strong> (for version control)</li>
</ul>
<h2 id="getting-started">Getting Started</h2>
<h3 id="1-clone-the-repository">1. Clone the Repository</h3>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="bash"><code><span class="line"><span style="color:#B392F0">git</span><span style="color:#9ECBFF"> clone</span><span style="color:#9ECBFF"> https://github.com/sourcegraph/training-cody-spring-boot.git</span></span>
<span class="line"><span style="color:#79B8FF">cd</span><span style="color:#9ECBFF"> pet-store-api</span></span></code></pre>
<h3 id="2-build-the-application">2. Build the Application</h3>
<p>The project uses Gradle with wrapper, so no separate Gradle installation is needed:</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="bash"><code><span class="line"><span style="color:#B392F0">./gradlew</span><span style="color:#9ECBFF"> build</span></span></code></pre>
<p>This command will:</p>
<ul>
<li>Download dependencies</li>
<li>Generate OpenAPI client code from the Pet Store specification</li>
<li>Compile the application</li>
<li>Run tests</li>
<li>Apply code formatting checks</li>
</ul>
<h3 id="3-run-the-application">3. Run the Application</h3>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="bash"><code><span class="line"><span style="color:#B392F0">./gradlew</span><span style="color:#9ECBFF"> bootRun</span></span></code></pre>
<p>The application will start on <code>http://localhost:8080</code>.</p>
<h3 id="4-explore-the-api">4. Explore the API</h3>
<p>Once running, you can access:</p>
<ul>
<li><strong>Swagger UI</strong>: <a href="http://localhost:8080/swagger-ui.html">http://localhost:8080/swagger-ui.html</a></li>
<li><strong>OpenAPI Docs</strong>: <a href="http://localhost:8080/api-docs">http://localhost:8080/api-docs</a></li>
<li><strong>H2 Database Console</strong>: <a href="http://localhost:8080/h2-console">http://localhost:8080/h2-console</a>
<ul>
<li>URL: <code>jdbc:h2:mem:testdb</code></li>
<li>Username: <code>sa</code></li>
<li>Password: <code>password</code></li>
</ul>
</li>
</ul>
<h2 id="development-workflow">Development Workflow</h2>
<h3 id="code-formatting">Code Formatting</h3>
<p>This project uses <a href="https://github.com/diffplug/spotless">Spotless</a> for automatic
code formatting:</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="bash"><code><span class="line"><span style="color:#6A737D"># Check formatting</span></span>
<span class="line"><span style="color:#B392F0">./gradlew</span><span style="color:#9ECBFF"> spotlessCheck</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D"># Apply formatting</span></span>
<span class="line"><span style="color:#B392F0">./gradlew</span><span style="color:#9ECBFF"> spotlessApply</span></span></code></pre>
<h3 id="pre-commit-hook">Pre-commit Hook</h3>
<p>Install the pre-commit hook to automatically format code before commits:</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="bash"><code><span class="line"><span style="color:#B392F0">./gradlew</span><span style="color:#9ECBFF"> installPreCommitHook</span></span></code></pre>
<h3 id="running-tests">Running Tests</h3>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="bash"><code><span class="line"><span style="color:#6A737D"># Run all tests</span></span>
<span class="line"><span style="color:#B392F0">./gradlew</span><span style="color:#9ECBFF"> test</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D"># Run tests with detailed output</span></span>
<span class="line"><span style="color:#B392F0">./gradlew</span><span style="color:#9ECBFF"> test</span><span style="color:#79B8FF"> --info</span></span></code></pre>
<h3 id="clean-build">Clean Build</h3>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="bash"><code><span class="line"><span style="color:#6A737D"># Clean and rebuild everything</span></span>
<span class="line"><span style="color:#B392F0">./gradlew</span><span style="color:#9ECBFF"> clean</span><span style="color:#9ECBFF"> build</span></span></code></pre>
<h2 id="project-structure">Project Structure</h2>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="text"><code><span class="line"><span>src/</span></span>
<span class="line"><span>âââ main/</span></span>
<span class="line"><span>â   âââ java/com/sourcegraph/petstore/</span></span>
<span class="line"><span>â   â   âââ App.java                    # Main Spring Boot application</span></span>
<span class="line"><span>â   â   âââ controller/                 # REST controllers</span></span>
<span class="line"><span>â   â   âââ service/                    # Business logic services</span></span>
<span class="line"><span>â   â   âââ model/                      # Data models</span></span>
<span class="line"><span>â   â   âââ repository/                 # Data access layer</span></span>
<span class="line"><span>â   âââ resources/</span></span>
<span class="line"><span>â       âââ application.properties      # Application configuration</span></span>
<span class="line"><span>â       âââ pet-store.json             # OpenAPI specification</span></span>
<span class="line"><span>âââ test/                              # Test classes</span></span>
<span class="line"><span>âââ build/                             # Generated files (excluded from git)</span></span>
<span class="line"><span></span></span>
<span class="line"><span>petstore-openapi-client/               # Generated OpenAPI client (auto-generated)</span></span></code></pre>
<h2 id="key-technologies">Key Technologies</h2>
<ul>
<li><strong>Spring Boot 3.4.3</strong> - Application framework</li>
<li><strong>Spring Security</strong> - Authentication and authorization</li>
<li><strong>Spring Data JPA</strong> - Data persistence</li>
<li><strong>H2 Database</strong> - In-memory database for development</li>
<li><strong>SpringDoc OpenAPI</strong> - API documentation</li>
<li><strong>OpenAPI Generator</strong> - Client code generation</li>
<li><strong>Spotless</strong> - Code formatting</li>
<li><strong>JUnit 5</strong> - Testing framework</li>
</ul>
<h2 id="making-changes">Making Changes</h2>
<h3 id="adding-new-features">Adding New Features</h3>
<ol>
<li><strong>Update the OpenAPI specification</strong> in <code>src/main/resources/pet-store.json</code></li>
<li><strong>Regenerate client code</strong> by running <code>./gradlew build</code></li>
<li><strong>Implement controllers</strong> in <code>src/main/java/com/sourcegraph/petstore/controller/</code></li>
<li><strong>Add business logic</strong> in <code>src/main/java/com/sourcegraph/petstore/service/</code></li>
<li><strong>Write tests</strong> in <code>src/test/java/</code></li>
</ol>
<h3 id="database-changes">Database Changes</h3>
<p>The application uses H2 in-memory database with <code>create-drop</code> strategy, so schema
changes are automatically applied on restart. For production, you would
configure a persistent database.</p>
<h3 id="configuration">Configuration</h3>
<p>Modify <code>src/main/resources/application.properties</code> to change:</p>
<ul>
<li>Database settings</li>
<li>Server port</li>
<li>Logging levels</li>
<li>OpenAPI documentation paths</li>
</ul>
<h2 id="useful-commands">Useful Commands</h2>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="bash"><code><span class="line"><span style="color:#6A737D"># Start application in development mode</span></span>
<span class="line"><span style="color:#B392F0">./gradlew</span><span style="color:#9ECBFF"> bootRun</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D"># Run with specific profile</span></span>
<span class="line"><span style="color:#B392F0">./gradlew</span><span style="color:#9ECBFF"> bootRun</span><span style="color:#79B8FF"> --args=</span><span style="color:#9ECBFF">'--spring.profiles.active=dev'</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D"># Generate OpenAPI client only</span></span>
<span class="line"><span style="color:#B392F0">./gradlew</span><span style="color:#9ECBFF"> openApiGenerate</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D"># Check dependencies for updates</span></span>
<span class="line"><span style="color:#B392F0">./gradlew</span><span style="color:#9ECBFF"> dependencyUpdates</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D"># View project dependencies</span></span>
<span class="line"><span style="color:#B392F0">./gradlew</span><span style="color:#9ECBFF"> dependencies</span></span></code></pre>
<h2 id="troubleshooting">Troubleshooting</h2>
<h3 id="build-issues">Build Issues</h3>
<ul>
<li><strong>Java version</strong>: Ensure youâre using Java 21</li>
<li><strong>Clean build</strong>: Run <code>./gradlew clean build</code> to resolve dependency issues</li>
<li><strong>Generated code</strong>: The <code>petstore-openapi-client/</code> directory is auto-generated
and should not be manually edited</li>
</ul>
<h3 id="runtime-issues">Runtime Issues</h3>
<ul>
<li><strong>Port conflicts</strong>: Change <code>server.port</code> in <code>application.properties</code></li>
<li><strong>Database issues</strong>: Access H2 console to inspect data</li>
<li><strong>API errors</strong>: Check Swagger UI for proper request format</li>
</ul>
<h2 id="contributing">Contributing</h2>
<ol>
<li>Install the pre-commit hook: <code>./gradlew installPreCommitHook</code></li>
<li>Make your changes</li>
<li>Run tests: <code>./gradlew test</code></li>
<li>Format code: <code>./gradlew spotlessApply</code></li>
<li>Commit and push your changes</li>
</ol>
<p>The pre-commit hook will automatically format your code before each commit.</p> </div>  </main> <footer data-astro-cid-37fxchfa> <p data-astro-cid-37fxchfa>Â© 2024 Sourcegraph. Supplemental to the <a href="https://ampcode.com/manual" data-astro-cid-37fxchfa>Amp Manual</a>.</p> </footer> </body></html> 